<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>🌐 IP 和系统信息查询</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f7f9fc;
      color: #333;
      padding: 20px;
    }

    .card {
      background: #fff;
      border-radius: 16px;
      padding: 24px;
      max-width: 600px;
      margin: 0 auto;
      box-shadow: 0 4px 14px rgba(0,0,0,0.1);
    }

    h2 {
      text-align: center;
      margin-bottom: 24px;
    }

    .row {
      display: flex;
      justify-content: space-between;
      margin: 10px 0;
      font-size: 1.1rem;
    }

    .label {
      font-weight: bold;
    }

    .icon {
      vertical-align: middle;
      width: 20px;
      height: 20px;
      margin-left: 6px;
    }

    .status {
      text-align: center;
      margin-top: 15px;
      font-size: 0.95rem;
      color: #888;
    }
  </style>
</head>
<body>

<div class="card">
  <h2>🌐 IP 和系统信息查询</h2>

  <div class="row"><span class="label">当前 IP：</span><span id="ip">查询中...</span></div>
  <div class="row"><span class="label">国家：</span><span id="country">-</span></div>
  <div class="row"><span class="label">城市：</span><span id="city">-</span></div>
  <div class="row"><span class="label">时区：</span><span id="timezone">-</span></div>
  <div class="row"><span class="label">ISP：</span><span id="isp">-</span></div>
  <div class="row"><span class="label">浏览器：</span><span id="browser">-</span></div>
  <div class="row"><span class="label">系统：</span><span id="os">-</span></div>
  <div class="status" id="status">数据获取中...</div>
</div>

<script>
  async function getIPInfo() {
    try {
      const res = await fetch("https://ipwho.is/");
      const data = await res.json();

      if (!data.success) throw new Error("查询失败");

      document.getElementById("ip").textContent = data.ip;
      document.getElementById("country").textContent = data.country;
      document.getElementById("city").textContent = data.city;
      document.getElementById("timezone").textContent = data.timezone?.id || "-";
      document.getElementById("isp").textContent = data.connection?.isp || "-";

      document.getElementById("status").textContent = "✅ 查询成功";
    } catch (err) {
      document.getElementById("status").textContent = "❌ Bro，查询失败，请检查网络";
      document.getElementById("ip").textContent = "-";
    }
  }

  function getSystemInfo() {
    const ua = navigator.userAgent;
    const os = navigator.platform;
    const browser = (() => {
      if (ua.includes("Chrome")) return "Chrome";
      if (ua.includes("Firefox")) return "Firefox";
      if (ua.includes("Safari") && !ua.includes("Chrome")) return "Safari";
      if (ua.includes("Edge")) return "Edge";
      return "未知浏览器";
    })();

    const isAndroid = /Android/.test(ua);
    const isIOS = /iPhone|iPad|iPod/.test(ua);

    const osText = isAndroid
      ? 'Android <img class="icon" src="https://img.icons8.com/color/48/000000/android-os.png"/>'
      : isIOS
      ? 'iOS <img class="icon" src="https://img.icons8.com/ios-filled/50/000000/mac-os.png"/>'
      : os;

    document.getElementById("browser").textContent = browser;
    document.getElementById("os").innerHTML = osText;
  }

  getSystemInfo();
  getIPInfo();
</script>

</body>
</html>
